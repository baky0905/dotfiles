#!/bin/bash

# {{ template "scripts-library" }}

# The following line is for ShellCheck to correctly identify the above include
true || source ../.chezmoitemplates/scripts-library

function is_vscode_extension_installed() {
    local extension="$1"

    code --list-extensions 2>/dev/null | grep -q "${extension}"
}

wanted_extensions=(
    eamodio.gitlens
    EditorConfig.EditorConfig
    mads-hartmann.bash-ide-vscode
    timonwong.shellcheck
    foxundermoon.shell-format
    ms-azuretools.vscode-docker
    ms-python.python
    ms-vscode-remote.remote-containers
    ms-vscode-remote.remote-ssh-edit
    ms-vscode-remote.remote-ssh
    ms-vscode-remote.vscode-remote-extensionpack
    ms-vscode-remote.vscode-remote-extensionpack
    redhat.vscode-yaml
    stkb.rewrap
    streetsidesoftware.code-spell-checker
    twpayne.vscode-testscript
    Tyriar.sort-lines
    yzhang.markdown-all-in-one
    natqe.reload
)

for extension in "${wanted_extensions[@]}"; do
    if ! is_vscode_extension_installed "${extension}"; then
        log_task "Installing VS Code extension: ${extension}"
        c code --install-extension "${extension}"
    fi
done
