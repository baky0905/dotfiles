#!/bin/bash

# {{ template "scripts-library" }}

# The following line is for ShellCheck to correctly identify the above include
true || source ../.chezmoitemplates/scripts-library

function is_vscode_extension_installed() {
    local extension="$1"

    code --list-extensions 2>/dev/null | grep -q "${extension}"
}

wanted_extensions=(
    mads-hartmann.bash-ide-vscode
    timonwong.shellcheck
    foxundermoon.shell-format
    editorconfig.editorconfig
    oderwat.indent-rainbow
    RobbOwen.synthwave-vscode
    vscode-icons-team.vscode-icons
    usernamehw.errorlens
    streetsidesoftware.code-spell-checker
    njpwerner.autodocstring
    aaron-bond.better-comments
    ms-azuretools.vscode-docker
    natqe.reload
    amazonwebservices.aws-toolkit-vscode
    thundra.thundra-debugger
    boto3typed.boto3-ide
    mhutchie.git-graph
    ms-python.python
    KevinRose.vsc-python-indent
    frhtylcn.pythonsnippets
    ms-python.vscode-pylance
    spmeesseman.svn-scm-ext
    littlefoxteam.vscode-python-test-adapter
    eamodio.gitlens
    mpontus.tab-cycle
    richie5um2.vscode-sort-json
    unional.vscode-sort-package-json
    WakaTime.vscode-wakatime
    znck.grammarly
    alefragnani.Bookmarks
    johnpapa.vscode-cloak
    formulahendry.code-runner
    unbug.codelf
    mikestead.dotenv
    sleistner.vscode-fileutils
    ritwickdey.LiveServer
    christian-kohler.path-intellisense
    johnpapa.vscode-peacock
    pnp.polacode
    esbenp.prettier-vscode
    ms-vscode-remote.remote-containers
    ms-vscode-remote.remote-wsl
    Gruntfuggly.todo-tree
    mechatroner.rainbow-csv
    almenon.arepl
    eamodio.gitlens
    EditorConfig.EditorConfig
    mads-hartmann.bash-ide-vscode
    timonwong.shellcheck
    foxundermoon.shell-format
    ms-azuretools.vscode-docker
    ms-python.python
    ms-vscode-remote.remote-containers
    ms-vscode-remote.remote-ssh-edit
    ms-vscode-remote.remote-ssh
    ms-vscode-remote.vscode-remote-extensionpack
    redhat.vscode-yaml
    stkb.rewrap
    streetsidesoftware.code-spell-checker
    twpayne.vscode-testscript
    Tyriar.sort-lines
    yzhang.markdown-all-in-one
)

for extension in "${wanted_extensions[@]}"; do
    if ! is_vscode_extension_installed "${extension}"; then
        log_task "Installing VS Code extension: ${extension}"
        c code --install-extension "${extension}"
    fi
done
